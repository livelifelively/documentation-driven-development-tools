# T1: Define Section Content Schemas

## 1 Meta & Governance

### 1.2 Status

- **Current State:** ðŸ’¡ Not Started
- **Priority:** ðŸŸ¥ High
- **Progress:** 0%
- **Planning Estimate:** 5
- **Est. Variance (pts):** 0
- **Created:** 2025-08-03 06:13
- **Implementation Started:**
- **Completed:**
- **Last Updated:** 2025-08-03 06:13

### 1.3 Priority Drivers

- [TEC-Prod_Stability_Blocker](../ddd-2.md#tec-prod_stability_blocker)

---

## 2 Business & Scope

### 2.1 Overview

- **Core Function**: This task is to create the canonical Zod schemas that define the expected content structure for each section within a `*.plan.md` or `*.task.md` document.
- **Key Capability**: It will produce one or more `*.ts` files that export Zod schemas for validating the parsed content of markdown sections (e.g., ensuring a "Status" section contains the correct bullet points).
- **Business Value**: Enables automated validation of documentation content, guaranteeing that all documents are structurally correct and can be reliably parsed by tools and LLMs.

### 2.4 Acceptance Criteria

| ID   | Criterion                                                                                                                   | Test Reference |
| :--- | :-------------------------------------------------------------------------------------------------------------------------- | :------------- |
| AC-1 | A file exists (e.g., `src/schema/content.zod.ts`) containing the section content Zod schemas.                               | N/A            |
| AC-2 | A Zod schema is defined and exported for the content of the `1.2 Status` section.                                           | N/A            |
| AC-3 | Zod schemas are defined and exported for the content of at least the `2.1 Overview` and `2.4 Acceptance Criteria` sections. | N/A            |
| AC-4 | The schemas are detailed enough to correctly validate a compliant markdown section and reject a non-compliant one.          | N/A            |

---

## 3 Planning & Decomposition

### 3.3 Dependencies

| ID  | Dependency On                                                                   | Type     | Status         | Notes                                                               |
| :-- | :------------------------------------------------------------------------------ | :------- | :------------- | :------------------------------------------------------------------ |
| D-1 | [T28: Define Canonical Schema Interfaces](./p1.t28-define-schema-types.task.md) | Internal | ðŸ’¡ Not Started | The base types for the schema definition itself are a prerequisite. |
| D-2 | A Markdown Parser (e.g., `remark`)                                              | External | ðŸ’¡ Not Started | The schemas will need to validate the output of the chosen parser.  |

---

## 4 High-Level Design

### 4.2 Target Architecture

#### 4.2.1 Data Models

The Zod schemas will be designed to validate the structure of data extracted from the markdown AST (Abstract Syntax Tree). For example, the content of a `1.2 Status` section in a task document is a bulleted list. The schema would validate this structure.

**Example for `1.2 Status` section content:**

```typescript
import { z } from 'zod';

// This schema validates the array of strings extracted from the list items
// in a "Status" section of a task document.
export const StatusContentSchema = z.object({
  'Current State': z.string(),
  Priority: z.string(),
  Progress: z.string(),
  'Planning Estimate': z.string(),
  'Est. Variance (pts)': z.string(),
  Created: z.string(),
  'Implementation Started': z.string().optional(),
  Completed: z.string().optional(),
  'Last Updated': z.string(),
});

// The parser would transform the markdown list into an object
// that can be validated by this schema.
```

---

## 6 Implementation Guidance

### 6.1 Implementation Log / Steps

- [ ] Create the file `src/schema/content.zod.ts`.
- [ ] Define and export a Zod schema for the `1.2 Status` section's content.
- [ ] Define and export Zod schemas for other critical sections like `2.1 Overview`.
- [ ] Continue defining schemas for all sections that have a clear, implicit structure.
- [ ] Review the `ddd-schema-json` files to identify all sections requiring a content schema.

---

## 7 Quality & Operations

### 7.1 Testing Strategy / Requirements

- Unit tests should be created to validate the content schemas.
- Each test will involve creating mock data objects (simulating the output of a markdown parser) and asserting that the schemas correctly pass valid data and fail invalid data.
